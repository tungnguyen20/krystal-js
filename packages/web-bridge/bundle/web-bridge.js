!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,(()=>(()=>{"use strict";var e={353:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Krystal=void 0,t.Krystal=class{constructor(){}isAvailable(){return r.g.checkIsKrystalAvailable&&r.g.checkIsKrystalAvailable()||!1}}},477:function(e,t,r){var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.simplifyCallback=t.StreamEvent=void 0;const a=r(102),o=r(930);var l;!function(e){e.STREAM_TERMINATED="STREAM_TERMINATED"}(l=t.StreamEvent||(t.StreamEvent={})),t.simplifyCallback=function(e,t){var{funcNameToWrap:r}=t;return function(e,{callbackNameFunc:t,funcToWrap:r}){return(0,a.createDataStream)((n=>{const s=t();let u;return e[s]=e=>{const t=(0,o.parseJson)(e.result);if((0,o.isType)(t,"event"))t.event===l.STREAM_TERMINATED&&u.unsubscribe();else{const{result:t,error:r,status_code:a}=e;n&&n.next&&n.next({result:null===t?void 0:(0,o.parseJson)(t),error:null===r?void 0:r,status_code:null===a?void 0:a})}},r(s),u=(0,a.createSubscription)((()=>{e[s]=void 0,n&&n.complete&&n.complete()})),u}))}(e,n(t,["funcNameToWrap"]))}},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDataStream=t.createSubscription=void 0,t.createSubscription=function(e){let t=!1;return{isUnsubscribed:()=>t,unsubscribe:()=>{t||(e(),t=!0)}}},t.createDataStream=function(e){return{subscribe:e,then:(t,r)=>new Promise(((n,a)=>{try{let r=null,a=!1;r=e({next:e=>{n(null==t?void 0:t(e)),r&&r.unsubscribe(),a=!0}}),a&&r&&r.unsubscribe()}catch(e){null==r?a(e):n(r(e))}}))}}},930:(e,t,r)=>{function n(e){return[...Object.keys(e),...Object.getOwnPropertyNames(Object.getPrototypeOf(e))]}function a({moduleName:e,funcName:t,requestID:r}){return`${e}_${t}Callback${null!==r?`_${r}`:""}`}function o(){return!!r.g.KrystalWebModule}function l(){return!!r.g.webkit&&!!r.g.webkit.messageHandlers&&!!r.g.webkit.messageHandlers.KrystalWebModule}Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsKrystalAvailableIOS=t.checkIsKrystalAvailableAndroid=t.checkIsKrystalAvailable=t.parseJson=t.wrapModuleName=t.isType=t.getFirstAvailableCallbackName=t.getCallbackName=t.getObjectKeys=void 0,t.getObjectKeys=n,t.getCallbackName=a,t.getFirstAvailableCallbackName=function(e,{moduleName:t,funcName:r}){let n=0;return(()=>{let o="";for(;(o=a({moduleName:t,funcName:r,requestID:n}))in e;)n+=1;return n+=1,o})()},t.isType=function(e,...t){if(!e)return!1;const r=n(e);return t.every((e=>r.indexOf(e)>=0))},t.wrapModuleName=function(e){return`Wrapped${e}`},t.parseJson=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}},t.checkIsKrystalAvailable=function(){return o()||l()},t.checkIsKrystalAvailableAndroid=o,t.checkIsKrystalAvailableIOS=l},980:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapGenericModule=void 0;const n=r(477),a=r(930);t.wrapGenericModule=function(e,t,r){return{invoke:(o,l)=>(0,n.simplifyCallback)(e,{funcNameToWrap:o,callbackNameFunc:()=>(0,a.getFirstAvailableCallbackName)(e,{moduleName:t,funcName:o}),funcToWrap:e=>r({subscriberId:e,method:o,module:t,parameters:null!=l?l:{}})})}}},6:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapModule=t.getModuleEnvironment=void 0;const n=r(930),a=r(980);t.getModuleEnvironment=function(e,t){return e[t]?"android":e.webkit&&e.webkit.messageHandlers&&e.webkit.messageHandlers[t]?"ios":void 0},t.wrapModule=function(e,t){e[(0,n.wrapModuleName)(t)]=(0,a.wrapGenericModule)(e,t,(r=>{if(e.KrystalWebModule)e.KrystalWebModule.invoke(t,r.method,r.subscriberId,JSON.stringify(r));else{if(!(e.webkit&&e.webkit.messageHandlers&&e.webkit.messageHandlers.KrystalWebModule))throw new Error(`Unexpected method '${r.method}' for module '${t}'`);e.webkit.messageHandlers.KrystalWebModule.postMessage({moduleName:t,methodName:r.method,subscriberId:r.subscriberId,requestString:JSON.stringify(r)})}}))}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.krystal=e.aaaa=e.wrapModule=e.getModuleEnvironment=e.createSubscription=e.createDataStream=e.StreamEvent=void 0;var t=r(477);Object.defineProperty(e,"StreamEvent",{enumerable:!0,get:function(){return t.StreamEvent}});var a=r(102);Object.defineProperty(e,"createDataStream",{enumerable:!0,get:function(){return a.createDataStream}}),Object.defineProperty(e,"createSubscription",{enumerable:!0,get:function(){return a.createSubscription}});var o=r(6);Object.defineProperty(e,"getModuleEnvironment",{enumerable:!0,get:function(){return o.getModuleEnvironment}}),Object.defineProperty(e,"wrapModule",{enumerable:!0,get:function(){return o.wrapModule}}),e.aaaa="11116";const l=r(930),s=r(6);r.g.wrapModule=s.wrapModule,r.g.checkIsKrystalAvailable=l.checkIsKrystalAvailable;const u=r(353);e.krystal=new u.Krystal})(),n})()));